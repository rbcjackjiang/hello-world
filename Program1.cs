using System;
using System.Collections.Generic;
using System.Linq;
using System.Globalization;
using System.Threading.Tasks;

namespace HelloWorld
{
    class Program
    {
        static void Main(string[] args)
        {
            // the first part is data source
            List<string> dates = new List<string>(new string[]{
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                null,
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "20171010",
                "abacdfdd",
                "20171010",
                "20171010"
            });

            int totalCount = dates.Count();

            DateTime d;
            string dateFormat = "yyyyMMdd";
            var validDates = from r in dates
                             where (!string.IsNullOrEmpty(r) 
                                    && DateTime.TryParseExact(r, dateFormat, 
                                        CultureInfo.InvariantCulture, 
                                        DateTimeStyles.None, 
                                        out d))
                             select r;

            if (validDates != null)
            {
                Console.WriteLine($"The count of valid date is {validDates.ToList().Count}.");
            }

            Console.Read();
        }
    }
}
